@page
@model Kool_Ref_Inventory_System.Pages.ServiceModel

<script>
    const add = document.getElementById("add"), close = document.getElementById("close"), window = document.getElementById("window");

    add.addEventListener("click", () => {
        window.showModal();
    });
    close.addEventListener("click", () => {
        window.close();
        });
</script>


<button id="add">Add Service Report</button>
<dialog id="window">
    <h2>Service Report <button id="close">Close</button></h2>
    <table class="service-table">
        <form method="post" asp-page="Inventory">
            <label for="item">Item Name</label><br>
            <input type="text" id="item" asp-for="WorkScope"><br>

            <label for="description">Description</label><br>
            <textarea asp-for="TimeIn" rows="1" cols="50"></textarea><br>

            <label for="supplier">Supplier Name</label><br>
            <input type="text" id="supplier" asp-for="TimeOut"><br>

            <label for="quantity">Quantity</label><br>
            <input type="number" id="quantity" asp-for="DateStarted"><br>

            <label for="price">Price</label><br>
            <input type="number" step="0.01" id="price" asp-for="DateEnded"><br>

            <label for="location">Location</label><br>
            <input type="text" id="location" asp-for="DeliveryReceipt"><br>

            <label for="dr">Delivery Receipt</label><br>
            <input type="number" id="dr" asp-for="InVoice"><br>
            <label for="dr">Delivery Receipt</label><br>
            <input type="number" id="dr" asp-for="Customer"><br>
            <label for="dr">Delivery Receipt</label><br>
            <input type="number" id="dr" asp-for="Address"><br>

            <button type="submit">Add to Inventory</button>
        </form>
    </table>
</dialog>

<table class="general-table">
    <thead>
        <tr>
            <th>Technicians</th>
            <th>Work Scope</th>
            <th>Time In</th>
            <th>Time Out</th>
            <th>Date Started</th>
            <th>Date Ended</th>
            <th>Customer</th>
            <th>Address</th>
            <th>IUD</th>
            <!--
                if value of dr != null 
                    input value
                else
                    input iv value

                Color: Blue-out | Green-in
            -->
            <th>Item</th>
            <th>Description</th>
            <th>Supplier</th>
            <th>Date</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Location</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                @foreach (var name in Model.Technicians)
                {
                    @name <br/>
                }
            </td>
            @foreach (var service in Model.ServiceReport)
            {
                <td>@service.WorkScope</td>
                <td>@service.TimeIn</td>
                <td>@service.TimeOut</td>
                <td>@service.DateStarted</td>
                <td>@service.DateEnded</td>
                <td>@service.Customer</td>
                <td>@service.Address</td>
                <td>@service.IUD</td>
            } 

            @foreach (var item in Model.Inventory)
            {
                <td>@item.Item</td>
                <td>@item.Description</td>
                <td>@item.Supplier</td>
                <td>@item.Date</td>
                <td>@item.Quantity</td>
                <td>@item.Price.ToString("C")</td>
                <td>@item.Location</td>
            }
        </tr>
    </tbody>
</table>